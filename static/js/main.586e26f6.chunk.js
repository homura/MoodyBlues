(this["webpackJsonpmoody-blues"]=this["webpackJsonpmoody-blues"]||[]).push([[0],{205:function(e,t,n){e.exports=n(458)},210:function(e,t,n){},212:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(3),o=n.n(i),c=(n(210),n(129),n(79)),l=(n(212),n(25)),u=n(14),s=n.n(u),d=n(53),m=n(90),v=n(89),f=n(91),h=n(32),p=n(44);function b(e,t,n){return e.findIndex((function(e){var a;return(null===(a=e.keyframe)||void 0===a?void 0:a[t])===n}))}function E(e,t){return s.a.findIndex(e,(function(e){return"keyframe"in e}),t+1)}function y(e,t,n){return s.a.findIndex(e,(function(e){return!!(e.keyframe&&n in e.keyframe)}),t+1)}function O(e,t,n){var a=e.keyframe;return a&&t in a?a[t]:n}var j=function e(t){var n=this;Object(p.a)(this,e),this.raw=void 0,this.startIndex=void 0,this.endIndex=void 0,this.parent=void 0,this.events=s.a.memoize((function(){return-1===n.startIndex||-1===n.endIndex?[]:n.raw.slice(n.startIndex,n.endIndex+1)})),this.nextSliceStartEvent=function(){if(-1===n.startIndex||-1===n.endIndex)return null;var e=E(n.raw,n.endIndex);return-1===e?null:n.raw[e]},this.timeRange=function(){if(-1===n.startIndex||-1===n.endIndex)return null;var e=n.nextSliceStartEvent();return e?[n.raw[n.startIndex].timestamp,e.timestamp]:null},this.raw=t;for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];var o=this.slice.apply(this,[t].concat(r)),c=Object(h.a)(o,2),l=c[0],u=c[1];this.startIndex=l,this.endIndex=u},g=function(e){function t(e,n,a){var r;return Object(p.a)(this,t),(r=Object(m.a)(this,Object(v.a)(t).call(this,e,n))).epochId=void 0,r.parent=void 0,r.epochId=n,r.parent=a,r}return Object(f.a)(t,e),Object(d.a)(t,[{key:"slice",value:function(e,t){var n=b(e,"epochId",t);return[n,y(e,n,"epochId")-1]}},{key:"rounds",value:function(){var e=this.events();if(s.a.isEmpty(e))return null;var t=this;return e.filter((function(e){return function(e,t){var n=e.keyframe;return!!(n&&t in n)}(e,"roundId")})).map((function(e){return new x(function(e){return O(e,"roundId",-1)}(e),t)}))}}]),t}(j),x=function(e){function t(e,n){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,n.raw,e,n))).roundId=void 0,a.parent=void 0,a.steps=function(){return null},a.roundId=e,a.parent=n,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"slice",value:function(e,t,n){var a=b(n.events(),"roundId",t)+n.startIndex;return-1===a?[-1,-1]:[a,y(e,a,"roundId")-1]}}]),t}(j),I=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).parent=null,n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"slice",value:function(e){return[0,e.length]}},{key:"roundCountEachEpoch",value:function(){var e=this.raw,t=new Map,n=-1,a=-1,r=!0,i=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value.keyframe;if(u)if("epochId"in u){var d=u.epochId;if(-1===n){n=d;continue}d-n===1?t.set(n,a+1):s.a.range(n,d).forEach((function(e){return t.set(e,-1)})),n=d}else"roundId"in u&&(a=u.roundId)}}catch(m){i=!0,o=m}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}},{key:"epoch",value:function(e){return new g(this.raw,e,this)}}]),t}(j),k={tracer:{events:[],activeIndex:null,activeEpoch:null,slice:Object(l.c)((function(e){return new I(e.events)})),eventLoaded:Object(l.c)((function(e){return!Object(u.isEmpty)(e.events)})),activeEvent:Object(l.c)((function(e){return null===e.activeIndex?null:e.events[e.activeIndex]})),loadEvents:Object(l.b)((function(e,t){e.events=t})),activateEvent:Object(l.b)((function(e,t){e.activeIndex=t})),inactivateEvent:Object(l.b)((function(e){e.activeIndex=null})),activateEpoch:Object(l.b)((function(e,t){e.activeEpoch=t,e.activeIndex=null})),inactivateEpoch:Object(l.b)((function(e){e.activeEpoch=null}))}},w=Object(l.e)(),C=Object(l.d)(k),S=w.useStoreActions,T=(w.useStoreDispatch,w.useStoreState),M=(n(214),n(8)),N=n(50),A=n(51);function R(){var e=Object(N.a)(["\n  width: 120px;\n  height: 31px;\n  margin: 16px 24px 16px 0;\n  line-height: 32px;\n  float: left;\n  font-weight: bold;\n"]);return R=function(){return e},e}var D=c.a.Header,z=A.a.div(R()),B=function(){return r.a.createElement(D,null,r.a.createElement(z,null,r.a.createElement(M.a,{type:"play-circle"})," Moody Blues"))},_=n(463),J=n(87),L=n(82),W=n(181),F=n(62),H=(n(271),function(e){return r.a.createElement(W.a,Object.assign({followCursor:!0,plugins:[F.b]},e))});function P(){var e=Object(N.a)(["\n  margin-right: 8px;\n\n  svg {\n    vertical-align: middle;\n  }\n"]);return P=function(){return e},e}var q=A.a.span(P()),K=function(e){var t=e.fill,n=e.label;return r.a.createElement(q,null,r.a.createElement("svg",{width:15,height:15},r.a.createElement("rect",{x:0,y:0,width:12,height:12,fill:t})),r.a.createElement("span",null,n))},$=Object(L.withSize)()((function(e){var t=e.size.width-20,n=e.data,i=Math.floor(11),o=Object(J.a)().domain([0,3,5]).range([0,.8,1]),c=Object(a.useState)(""),l=Object(h.a)(c,2),u=l[0],s=l[1],d=Object(a.useMemo)((function(){return r.a.createElement("g",{transform:"translate(20,20)"},n.map((function(t,n){return r.a.createElement("rect",{key:n,x:15*Math.floor(n/i),y:n%i*15,width:12,height:12,fill:-1===t?"#ebedf0":Object(_.a)(o(t)),onMouseOver:function(){var t;return s(null===(t=e.onTooltip)||void 0===t?void 0:t.call(e,n))},onClick:function(){var t;return null===(t=e.onCellClick)||void 0===t?void 0:t.call(e,n)}})})))}),[n]);return r.a.createElement("div",null,r.a.createElement("svg",{width:t,height:180},r.a.createElement(H,{animation:"fade",content:u},d)),r.a.createElement("div",{style:{padding:"0 20px"}},r.a.createElement(K,{fill:"#ebedf0",label:"incomplete"}),r.a.createElement(K,{fill:Object(_.a)(o(1)),label:"1"}),r.a.createElement(K,{fill:Object(_.a)(o(3)),label:"3"}),r.a.createElement(K,{fill:Object(_.a)(o(5)),label:"\u2265 5"})))})),G=function(){var e=T((function(e){return e.tracer.events})),t=S((function(e){return e.tracer.activateEpoch})),n=Object(a.useMemo)((function(){var t=new I(e).roundCountEachEpoch();return[Array.from(t.keys()),Array.from(t.values())]}),[e]),i=Object(h.a)(n,2),o=i[0],c=i[1];return r.a.createElement($,{domain:[0,3,5],range:[0,.8,1],data:c,onCellClick:function(e){return t(o[e])},onTooltip:function(e){return r.a.createElement("div",null,"epoch: ",o[e]," ",r.a.createElement("br",null)," round: ",c[e])}})},Q=(n(272),n(194)),U=(n(459),n(193)),V=(n(283),n(183)),X=(n(144),n(88)),Y=(n(146),n(34)),Z=n(182),ee=n.n(Z),te=n(462);function ne(e,t){var n;return t=null!==(n=t)&&void 0!==n?n:"yyyy-MM-dd HH:mm:ss:SSS",Object(te.a)(e,t)}var ae={scheme:"monokai",base00:"unset",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},re=function(e){var t=e.event;if(!t)return null;var n={tag:s.a.get(t,"tag")};return r.a.createElement("div",null,r.a.createElement(X.a,null,r.a.createElement(Y.a,{span:8},"name"),r.a.createElement(Y.a,{span:16},t.eventName),r.a.createElement(Y.a,{span:8},"time"),r.a.createElement(Y.a,{span:16},ne(t.timestamp))),r.a.createElement(V.a,null),r.a.createElement(ee.a,{data:n,theme:ae,invertTheme:!1,hideRoot:!0}))};function ie(){var e=Object(N.a)(["\n  cursor: pointer;\n"]);return ie=function(){return e},e}var oe=A.a.div(ie()),ce=function(e){var t=T((function(e){return e.tracer})),n=t.slice,a=t.activeEpoch,i=t.activeEvent,o=S((function(e){return e.tracer})),c=o.activateEvent,l=o.inactivateEvent;if(null===a)return null;var u=n.epoch(a),s=u.events(),d=[{key:"Name",title:"Name",dataIndex:"eventName",render:function(e,t,n){return r.a.createElement(oe,{onClick:function(){return c(n+u.startIndex)}},e)}},{key:"Timestamp",title:"Timestamp",dataIndex:"timestamp",render:function(e){return ne(e)}}];return r.a.createElement("div",{style:{position:"relative",overflow:"hidden"}},r.a.createElement(U.a,{size:"small",pagination:!1,rowKey:function(e,t){return String(t)},dataSource:s,columns:d,scroll:{y:300}}),r.a.createElement(Q.a,{placement:"right",width:400,onClose:function(){return l()},visible:!!i,mask:!1,getContainer:!1,style:{position:"absolute"}},r.a.createElement(re,{event:i})))},le=(n(446),n(126)),ue=Object(L.withSize)()((function(e){var t,n=T((function(e){return e.tracer})),i=n.slice,o=n.activeEpoch,c=Object(a.useState)(0),l=Object(h.a)(c,2),u=l[0],s=l[1];if(null===o)return null;var d=i.epoch(o),m=d.timeRange();if(!m)return null;var v=e.size.width,f=Object(J.a)().domain([0,m[1]-m[0]]).range([0,v-50]);return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement("div",null,"Timeline"),r.a.createElement(H,{content:"".concat(u,"ms")},r.a.createElement("div",null,null===d||void 0===d?void 0:null===(t=d.rounds())||void 0===t?void 0:t.map((function(e){var t=e.timeRange(),n=e.roundId;if(!t)return null;var a=Object(h.a)(t,2),i=a[0],o=a[1]-i;return r.a.createElement("svg",{key:n,width:f(o),height:15,onMouseOver:function(){return s(o)}},r.a.createElement("g",{key:e.roundId},r.a.createElement("rect",{x:0,y:0,width:"100%",height:15,style:{fill:"#eec360",strokeWidth:1,stroke:"#333333"}}),r.a.createElement("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fill:"#333333"},"R",e.roundId)))})))))})),se=function(e){var t,n,a=T((function(e){return e.tracer})),i=a.activeEpoch,o=a.slice;if(null===i)return null;var c=(null!==(t=null===(n=s.a.last(o.epoch(i).rounds()))||void 0===n?void 0:n.roundId)&&void 0!==t?t:-1)+1;return r.a.createElement(X.a,{gutter:16,style:{padding:"8px"}},r.a.createElement(Y.a,{span:6},r.a.createElement(le.a,{title:"Epoch",value:i})),r.a.createElement(Y.a,{span:6},r.a.createElement(le.a,{title:"Round usage",value:c})),r.a.createElement(Y.a,{span:12},r.a.createElement(ue,null)))},de=function(){return r.a.createElement("div",null,r.a.createElement(G,null),r.a.createElement("div",{style:{padding:"4px"}},r.a.createElement(se,null),r.a.createElement(ce,null)))},me=n(198),ve=n(195),fe=n(192);function he(e,t){return{timestamp:e,eventName:"goto_new_round",keyframe:{roundId:t}}}var pe=["propose","prevote","precommit","commit"];function be(e,t){var n=pe[t];return{eventName:n,timestamp:e,keyframe:{stepName:n}}}var Ee=["epoch","tx","proposal","vote","lock"],ye=["check","get","receive","request","start","validate"].flatMap((function(e){return Ee.map((function(t){return"".concat(e,"_").concat(t)}))})),Oe=[{address:"0x10000000000000000000000000000000000000"},{address:"0x10000000000000000000000000000000000000",lock:"0x10000000000000000000000000000000000000"},{key:Math.random()},{tx:"0x10000000000000000000000000000000000000",proposal:"0x10000000000000000000000000000000000000"}];function je(e){return{timestamp:e,eventName:s.a.sample(ye),tag:s.a.sample(Oe)}}var ge=function(){function e(t){Object(p.a)(this,e),this.options=void 0,this.time=void 0,this.epoch=void 0,this.round=void 0,this.step=void 0,this.events=void 0,this.events=[],this.options=this.initialOptions(t);var n=this.options,a=n.startTime,r=n.startEpochId;this.time=a,this.epoch=r,this.round=0,this.step=0}return Object(d.a)(e,[{key:"initialOptions",value:function(e){return Object.assign({startEpochId:s.a.random(0,1e7),epochCount:1200,startTime:s.a.random(+new Date(2016,1,1),Date.now())},e)}},{key:"consumeTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;this.time+=s.a.random(0,e)}},{key:"mockCustomEvent",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=s.a.random(0,e);t--;)this.consumeTime(30),this.events.push(je(this.time))}},{key:"mock",value:function(){for(var e,t,n=this.options.epochCount;n--;)if(this.mockCustomEvent(),Math.random()<.05)this.consumeTime(3e3),this.epoch++;else{this.consumeTime(),this.events.push((e=this.time,t=this.epoch,{timestamp:e,eventName:"goto_new_epoch",keyframe:{epochId:t}}));for(var a=s.a.random(0,6);this.round<=a;)if(this.mockCustomEvent(),Math.random()<.05)this.consumeTime(),this.round++;else{this.consumeTime(),this.events.push(he(this.time,this.round));for(var r=a===this.round?3:s.a.random(0,3);this.step<=r;)this.mockCustomEvent(),this.consumeTime(),this.events.push(be(this.time,this.step)),this.step++;this.step=0,this.round++}this.round=0,this.epoch++}return this.events}}]),e}(),xe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",outline:"none",transition:"border .24s ease-in-out"},Ie={borderColor:"#2196f3"},ke={borderColor:"#00e676"},we={borderColor:"#ff1744"};function Ce(e){var t=e.onLoad,n=Object(ve.a)({accept:".json",multiple:!1}),i=n.getRootProps,o=n.getInputProps,c=n.isDragActive,l=n.isDragAccept,s=n.isDragReject,d=n.acceptedFiles;Object(a.useEffect)((function(){var e;!Object(u.isEmpty)(d)&&t&&(e=d[0],new Promise((function(t,n){var a=new FileReader;a.onload=function(){var e=a.result;t(JSON.parse(e))},a.readAsText(e)}))).then(t)}),[d]);var m=Object(a.useMemo)((function(){return Object(me.a)({},xe,{},c?Ie:{},{},l?ke:{},{},s?we:{})}),[l,c,s]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",i({style:m}),r.a.createElement("input",o()),r.a.createElement("p",null,"Drag a parsed ",r.a.createElement("strong",null,"events.json")," here, or click to select file")),r.a.createElement("div",null,"Or try this mock\xa0",r.a.createElement("a",{onClick:function(){return function(){var e=(new ge).mock(),t=new Blob([JSON.stringify(e)],{type:"application/json"});Object(fe.saveAs)(t,"events.json")}()}},"events.json")))}var Se=function(){var e=T((function(e){return e.tracer.eventLoaded})),t=S((function(e){return e.tracer.loadEvents}));return e?r.a.createElement(de,null):r.a.createElement(Ce,{onLoad:t})},Te=c.a.Content,Me=function(){return r.a.createElement(l.a,{store:C},r.a.createElement(B,null),r.a.createElement(Te,null,r.a.createElement(Se,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[205,1,2]]]);
//# sourceMappingURL=main.586e26f6.chunk.js.map